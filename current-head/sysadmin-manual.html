<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>FURMS System Administrator Manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>FURMS System Administrator Manual</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#furms-architecture-overview">FURMS architecture overview</a>
<ul class="sectlevel2">
<li><a href="#unity-idm">Unity-IdM</a></li>
</ul>
</li>
<li><a href="#furms-installation-from-scratch">FURMS installation from scratch</a>
<ul class="sectlevel2">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#broker">Broker</a></li>
<li><a href="#installation-best-practices">Installation best practices</a></li>
<li><a href="#furms-devops-tools-installation-utility">FURMS devops tools installation utility</a></li>
<li><a href="#furms-ansible-scripts">FURMS Ansible scripts</a></li>
<li><a href="#setup-ansible-configuration-files">Setup Ansible configuration files</a></li>
<li><a href="#email-templates-configuration">Email templates configuration</a></li>
<li><a href="#install-furms-stack">Install FURMS stack</a></li>
</ul>
</li>
<li><a href="#furms-system-minor-update-procedure">FURMS system minor update procedure</a></li>
<li><a href="#upgrade-from-1-0-to-2-0-release">Upgrade from 1.0 to 2.0 release</a></li>
<li><a href="#upgrade-from-2-0-to-3-0-release">Upgrade from 2.0 to 3.0 release</a></li>
<li><a href="#upgrade-from-3-0-to-3-1-release">Upgrade from 3.0 to 3.1 release</a></li>
<li><a href="#operating-the-system">Operating the system</a>
<ul class="sectlevel2">
<li><a href="#starting-furms-stack">Starting FURMS stack</a></li>
<li><a href="#stopping-furms-stack">Stopping FURMS stack</a></li>
<li><a href="#runtime-directories-structure-log-files">Runtime directories structure, log files</a></li>
<li><a href="#authentication-to-unity-console">Authentication to Unity console</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="./images/logo-fenix.png" alt="logo fenix">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="furms-architecture-overview"><a class="anchor" href="#furms-architecture-overview"></a>FURMS architecture overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FURMS system consists of two services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unity-IdM: an existing open source software which covers:</p>
<div class="ulist">
<ul>
<li>
<p>authentication</p>
</li>
<li>
<p>user provisioning</p>
</li>
<li>
<p>groups management (with persistence)</p>
</li>
<li>
<p>user management including user attributes and group memberships (with persistence)</p>
</li>
<li>
<p>notifications functionality</p>
</li>
</ul>
</div>
</li>
<li>
<p>The FURMS service</p>
<div class="ulist">
<ul>
<li>
<p>a complete UI for the FURMS users (only sign-in and sign-up views will be hosted on Unity)</p>
</li>
<li>
<p>communities, projects and sites management,</p>
</li>
<li>
<p>control and assignment of budgets</p>
</li>
<li>
<p>accounting</p>
</li>
<li>
<p>external REST API</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The administrative control of the FURMS system is available via the dedicated FURMS service UI, however some rarely used system administration actions will require the use of Unity-IdM administrative UI. An example of such action is the modification of email message templates used for notifications sent by FURMS. Note that only the FURMS administrators will need to use Unity-IdM administrative UI, other types of users (e.g. site admins or community admins) will not have to use it.</p>
</div>
<div class="paragraph">
<p>The following figure shows high level overview of the interactions between FURMS system and FENIX infrastructure.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/furms-hld-arch.png" alt="High level overview of the interactions between FURMS system and FENIX infrastructure" width="50%">
</div>
</div>
<div class="sect2">
<h3 id="unity-idm"><a class="anchor" href="#unity-idm"></a>Unity-IdM</h3>
<div class="paragraph">
<p>Unity-IdM is an existing software providing authentication and user management service. Unity-IdM allows its users to enable authentication to their web services using various protocols, with different configurations for many relaying parties. The actual authentication can be performed using the built-in, feature-rich users database or can be delegated to one of supported upstream identity providers.</p>
</div>
<div class="paragraph">
<p>The information obtained from upstream IdPs can be flexibly translated and merged with the local database (if needed) and re-exported using other protocols. Unity-IdM can authenticate both locally and using SAML and Oauth authentication protocols. Authentication can be performed against locally stored credentials or delegated to external service.</p>
</div>
<div class="paragraph">
<p>The following figure shows the high level Unity-IdM architecture</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/Unity-IdM-hld-arch.png" alt="High level Unity-IdM architecture">
</div>
</div>
<div class="paragraph">
<p>More of the general information on Unity can be found at <a href="https://unity-idm.eu" class="bare">https://unity-idm.eu</a> web page, while the reference documentation is available at the <a href="https://www.unity-idm.eu/support/" class="bare">https://www.unity-idm.eu/support/</a> sub-page.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="furms-installation-from-scratch"><a class="anchor" href="#furms-installation-from-scratch"></a>FURMS installation from scratch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to install the FURMS system from scratch. The installation is done through Ansible scripts and covers installation of FURMS service as well as Unity-IdM service. Both services work closely together.</p>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="sect3">
<h4 id="hardware-requirements"><a class="anchor" href="#hardware-requirements"></a>Hardware requirements</h4>
<div class="paragraph">
<p>Both services can be installed on a single machine, or on two separate ones. As the communication between the servers is intensive a single host installation may be preferred.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Disk space</strong>: installation of both services together requires less than 1GB of disk space. It is advised to reserve significantly more in order to preserve log files and multiple updates (each is installed in separate directory by default).</p>
</li>
<li>
<p><strong>RAM</strong>: minimum of 1GB of free memory <em>per each service</em> must be reserved. It is advised to provide 4GB per service in order to handle heavy load.</p>
</li>
<li>
<p><strong>CPU</strong>: there are no strict restrictions, however at least 2 cores per service are advised. Production environment with many users may make good use of a more powerful machine.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="java"><a class="anchor" href="#java"></a>Java</h4>
<div class="paragraph">
<p>FURMS system requires Java Runtime Environment. The version 11 is the supported Java version. Install JRE on host(s) where services are going to be run.</p>
</div>
</div>
<div class="sect3">
<h4 id="ansible"><a class="anchor" href="#ansible"></a>Ansible</h4>
<div class="paragraph">
<p>Install Ansible tooling on the host which will control FURMS system through scripts. Follow the <a href="https://docs.ansible.com/ansible/latest/installation_guide/">Ansible installation guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="database"><a class="anchor" href="#database"></a>Database</h4>
<div class="paragraph">
<p>Install any recent version of PostgreSQL on the host of your choice. The setup of database requires creation of two databases each with a separate role (user) which is able to connect to the database. One database is utilized by FURMS service and the other for Unity-IdM. This information will be used later on in the Ansible group variable file to setup databases configuration during installation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="broker"><a class="anchor" href="#broker"></a>Broker</h3>
<div class="paragraph">
<p>Install any recent RabbitMQ broker with support for AMPQ 0.9.1. The broker setup requires:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>configuration of the TLS in order to enable encryption on the protocol level,</p>
</li>
<li>
<p>definition of the <a href="https://www.rabbitmq.com/vhosts.html">RabbitMQ virtual host</a> utilized for the FURMS purposes,</p>
</li>
<li>
<p>definition of the client user name and password with</p>
<div class="ulist">
<ul>
<li>
<p>a connection rights to FURMS virtual host,</p>
</li>
<li>
<p>privileges to provision queues within this virtual host</p>
</li>
<li>
<p>permissions to write messages to AMQP default exchange (<code>amq.default</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The virtual host name, privileged client user name and a password, as well as public CA certificate which was used to sign credential for the broker are used later on in the Ansible group variable file to setup broker connection during installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The broker service is considered as the infrastructure resource, however for demonstration purposes and ease of configuration, below is an example of <code>rabbitmq.conf</code> file with TLS support turned on.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>listeners.ssl.default = 5671

ssl_options.cacertfile = /etc/rabbitmq/certs/ca_certificate.pem
ssl_options.certfile = /etc/rabbitmq/certs/server_certificate.pem
ssl_options.keyfile = /etc/rabbitmq/certs/server_key.pem
ssl_options.password = &lt;put-keyfile-password&gt;
ssl_options.fail_if_no_peer_cert = false
ssl_options.verify = verify_none
ssl_options.versions.1 = tlsv1.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://www.rabbitmq.com/ssl.html">RabbitMQ TLS Support</a> guide for more informations.</p>
</div>
<div class="sect3">
<h4 id="connection-setup-for-sites-local-agent"><a class="anchor" href="#connection-setup-for-sites-local-agent"></a>Connection setup for site&#8217;s local agent</h4>
<div class="paragraph">
<p>The communication between FURMS and particular site is done through two queues which are declared by FURMS when FENIX administrator creates a site. Dedicated queue names consists of site&#8217;s identifier and a special suffix:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;siteid&gt;-site-pub</code> - queue is used by site to publish messages to FURMS</p>
</li>
<li>
<p><code>&lt;siteid&gt;-furms-pub</code> - queue is used by FURMS to publish message to the site</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The site&#8217;s identifier is visible on Site administrator&#8217;s Settings page as 'Site Id'. When the Site Id is e.g. <code>ygmr6</code>, then the created queues names are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ygmr6-site-pub</code></p>
</li>
<li>
<p><code>ygmr6-furms-pub</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From Site&#8217;s point of view, broker administrator must define:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an exchange of <code>direct</code> type within FURMS virtual host with:</p>
<div class="ulist">
<ul>
<li>
<p>name set to <code>&lt;siteid&gt;-site-pub</code> (note that an exchange and site publish queue names are the same),</p>
</li>
<li>
<p>binding created, and configured to route messages with <code>&lt;siteid&gt;-site-pub</code> routing key to <code>&lt;siteid&gt;-site-pub</code> queue</p>
</li>
</ul>
</div>
</li>
<li>
<p>the client user name and password with a connection rights to FURMS virtual host, and privileges to:</p>
<div class="ulist">
<ul>
<li>
<p>write messages to <code>&lt;siteid&gt;-site-pub</code> exchange,</p>
</li>
<li>
<p>read messages from <code>&lt;siteid&gt;-furms-pub</code> queue,</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In order to setup a connection from site agent to broker, the aforementioned user name and password is required as well as the public CA certificate which was used to sign credential for the broker. This information needs to be handed over to the local site administrator in order to setup encrypted and authorized connection to FURMS through the broker.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installation-best-practices"><a class="anchor" href="#installation-best-practices"></a>Installation best practices</h3>
<div class="paragraph">
<p>There are two recommended configurations of FURMS system that can be used to install the services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>behind HTTP proxy</p>
</li>
<li>
<p>exposed directly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending upon which is selected, there are some ramifications on the configuration to be made.</p>
</div>
<div class="sect3">
<h4 id="http-proxy-configuration"><a class="anchor" href="#http-proxy-configuration"></a>HTTP proxy configuration</h4>
<div class="paragraph">
<p>It is assumed that in this configuration the proxy has installed the certificates signed by legitimate authorities. In this case the FURMS system can be equipped with self-signed certificates. One pair of PKI credential for Unity-IdM and the other for FURMS Service.</p>
</div>
<div class="paragraph">
<p>Note that for such configuration the truststore needs to be carefully prepared. The general rule of a thumb is that it must contain at least:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the public CA certificate which is at the top of the certificates chain used to sign Unity-IdM credential,</p>
</li>
<li>
<p>the public CA certificate which is at the top of the certificates chain used to sign Central IdP credential.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="services-exposed-directly"><a class="anchor" href="#services-exposed-directly"></a>Services exposed directly</h4>
<div class="paragraph">
<p>In this configuration, both Unity-IdM as well as a FURMS service must be equipped with PKI credentials signed by legitimate authorities. The truststore can be configured to use the system one. On RHEL like system the default place of a trustore is <code><code>/etc/pki/java/cacerts</code></code>, and on Ubuntu like systems  <code><code>/etc/ssl/certs/java/cacerts</code></code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In both setup cases, there are configuration options in the Ansible group variables file, that need to be properly filled according to your infrastructure setup <code><code>*.advertisedHost</code></code>,  <code><code>unity.proxyCount</code></code>. Please refer to the description of the variables in the following sections.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="furms-devops-tools-installation-utility"><a class="anchor" href="#furms-devops-tools-installation-utility"></a>FURMS devops tools installation utility</h3>
<div class="paragraph">
<p>In order to install the latest released FURMS devops tooling, use the <code>FURMS devops tools installation utility</code>.
Enter to the directory of your choice and run the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; export FURMS_ROOT_DIR=/home/furms-app/staging
&gt; curl -L https://raw.githubusercontent.com/unity-idm/furms-devops/main/install-tooling/install_furms_devops_tooling.py -o $FURMS_ROOT_DIR/install_furms_devops_tooling.py
&gt; chmod +x $FURMS_ROOT_DIR/install_furms_devops_tooling.py</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="furms-ansible-scripts"><a class="anchor" href="#furms-ansible-scripts"></a>FURMS Ansible scripts</h3>
<div class="paragraph">
<p>Use the <code>FURMS devops tools installation utility</code> to install the latest Ansible scripts.
Enter to the directory where the utility was installed, and execute the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cd $FURMS_ROOT_DIR
&gt; ./install_furms_devops_tooling.py
Installation of latest FURMS devops tools into /home/furms-app/staging
Command finished successfully
&gt; ls -l
lrwxrwxrwx. 1 furms-app furms-app   32 01-16 12:27 furms-devops-tooling -&gt; furms-devops-tooling-1.0.0
drwxr-xr-x. 5 furms-app furms-app 4096 10-28 15:36 furms-devops-tooling-1.0.0
-rwxr-x---. 1 furms-app furms-app 3057 01-16 12:25 install_furms_devops_tooling.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>The aforementioned tool can be run at will, and the consecutive executions will update the FURMS Ansible scripts to the latest version.</p>
</div>
</div>
<div class="sect2">
<h3 id="setup-ansible-configuration-files"><a class="anchor" href="#setup-ansible-configuration-files"></a>Setup Ansible configuration files</h3>
<div class="paragraph">
<p>Create the inventory and group variables files in the <code>$FURMS_ROOT_DIR</code> directory (where FURMS devops tooling was installed). You can base on the example files that are delivered with the Ansible tooling.</p>
</div>
<div class="paragraph">
<p>With regards to the inventory file, depending upon whether you are going to install FURMS system components on local machine, or on remote hosts, there are two different example files prepared. If you intend to install components on a local machine, then use <code>inventory.local</code> file in the example below, otherwise use <code>inventory.remote</code> to have installation performed on remote hosts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cd $FURMS_ROOT_DIR
&gt; cp furms-devops-tooling/local-cfg-sample/inventory.local inventory  # or inventory.remote
&gt; mkdir -p group_vars
&gt; cp furms-devops-tooling/local-cfg-sample/group_vars/all.yml group_vars/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following files should be copied to the current directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><code>inventory</code></code></p>
</li>
<li>
<p><code><code>group_vars/all.yml</code></code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="inventory"><a class="anchor" href="#inventory"></a>Inventory</h4>
<div class="paragraph">
<p>Ansible can work against multiple machines in your infrastructure. It does this by selecting systems listed in Ansible’s inventory file. Make appropriate changes to the copied example of inventory file.</p>
</div>
</div>
<div class="sect3">
<h4 id="group-vars"><a class="anchor" href="#group-vars"></a>Group vars</h4>
<div class="paragraph">
<p>All of the FURMS deployment settings are configured in the <code>all.yml</code> Ansible group file. The example of this file can be found now in <code>$FURMS_ROOT_DIR/group_vars/all.yml</code> file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The devops tooling provides also a file that is filled out with example values. A file sample demonstrates the configuration of FURMS system behind a proxy, please see <code>$FURMS_ROOT_DIR/furms-devops-tooling/local-cfg-sample/group_vars/all.yml.behind-proxy</code> for a reference.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table provides description of all configuration options.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 12%;">
<col style="width: 68%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">installDir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory name where FURMS services will be installed e.g. "{{inventory_dir}}/services"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of released FURMS software e.g. "1.0.0"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">trustStore</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>FURMS system trustrore used by FURMS service as well as Unity-IdM. It must contain at least:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the public CA certificate which is at the top of the certificates chain used to sign Unity-IdM credential.</p>
</li>
<li>
<p>the public CA certificate which is at the top of the certificates chain used to sign Central IdP credential.</p>
</li>
<li>
<p>the public CA certificate which is at the top of the certificates chain used to sign Broker credential.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">trustStore.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filesystem path on Ansible management host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The JKS format keystore path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">trustStore.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the keystore type truststore</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><em>--- Unity-IdM configuration ---</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address for HTTP connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer [0-65535]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP port to be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.advertisedHost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address (optionally with port), which is advertised externally. Examples: login.unity.com or login.unity.com:8443. If host is not advertised externally this value must be set to the <code><code>unity.host:unity.port</code></code> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.initialAdminUsername</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username of the FENIX administrator to be installed in the system upon first installation. This is also the initial Unity-IdM administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.initialAdminPassword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password of the FENIX &amp; Unity-IdM administrator to be installed to the empty database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.proxyCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer [0 - 32]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to 0 then it is assumed then Unity-IdM server is not behind a proxy. Otherwise the number should specify the number of (local, trusted) proxies that are protecting the server from the actual clients. In effect the assumed client IP will be taken from the X-Forwarded-For header, stripping the trailing ones from intermediary proxies. Note that only proxy servers setting X-Forwarded-For are supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.pki.keyStore.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filesystem path on Ansible management host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credential location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.pki.keyStore.type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[jks, pkcs12]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format of the credential.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.pki.keyStore.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password required to load the credential. Keystore must use the same key password as the keystore password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.db.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address (optionally with port) that points to the PostgreSQL instance e.g. localhost:5432</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.db.dbName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL database name used by Unity-IdM instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.db.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unity-IdM database username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.db.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unity-IdM database password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.cIdP</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Configuration that contains the Central IdP OAuth client&#8217;s credentials used on Unity-IdM side for authentication via Central IdP.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The redirect URL configured at Central IdP OAuth client side should be set to https://<code>{unity.advertisedHost}</code>/unitygw/oauth2ResponseConsumer
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.cIdP.clientId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client identifier, obtained during Unity’s registration at the Central IdP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.cIdP.clientSecret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client secret, obtained during Unity’s registration at the Central IdP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.cIdP.discoveryEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Central IdP OpenID Connect Discovery endpoint address, for production environment <a href="https://central-proxy.fenix-ri.eu/.well-known/openid-configuration" class="bare">https://central-proxy.fenix-ri.eu/.well-known/openid-configuration</a> and for the acceptance environment <a href="https://proxy.acc.fenix.eduteams.org/.well-known/openid-configuration" class="bare">https://proxy.acc.fenix.eduteams.org/.well-known/openid-configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Configuration of Unity-IdM mail notifications subsystem, used by FURMS to send invitations, applications, policy acceptance information etc. Mail configuration is optional.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The SSL for SMTP connections is enabled by default.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail.from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name which will be used for From: field of the email. It is also used as SMTP envelope return address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SMTP server to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail.smtp.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer [0-65535]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SMTP server port to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail.smtp.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name to authenticate SMTP connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.mail.smtp.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to authenticate SMTP connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.msgTemplates</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Configuration of email templates used by FURMS to send notifications. This configuration is optional, FURMS comes with default config file and default email template files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more information on email templates configuration, please refer to <a href="#email-templates-configuration">Email templates configuration</a> section.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.msgTemplates.configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filesystem path on Ansible management host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unity message templates configuration file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unity.msgTemplates.files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filesystem path on Ansible management host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to directory with HTML body files used by message templates.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><em>--- FURMS service configuration ---</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address for HTTP connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer [0 - 65535]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP port to be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.advertisedHost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address (optionally with port), which is advertised externally. Examples: login.unity.com or login.unity.com:8443. If host is not advertised externally this value must be set to the <code><code>furmsServer.host:furmsServer.port</code></code> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.pki.keyStore.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filesystem path on Ansible management host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credential location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.pki.keyStore.type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[jks, pkcs12]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format of the credential.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.pki.keyStore.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password required to load the credential. Keystore must use the same key password as the keystore password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.db.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address (optionally with port) that points to the PostgreSQL instance e.g. localhost:5432</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.db.dbName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL database name used by FURMS service instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.db.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FURMS service database username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.db.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FURMS service database password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.preSharedKeys.cIdP</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">The cIdP key is defined by FURMS administrator. The information entered here setup the base authentication credentials, used to access the FURMS REST API exposed for Central IdP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.preSharedKeys.cIdP.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for Central IdP REST API credential</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.preSharedKeys.cIdP.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for Central IdP REST API credential</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Configuration options to setup connection with the RabbitMQ.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname or IP address that points to the RabbitMQ instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer [0-65535]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ port to which to connect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ user to use when connecting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ password for this user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.broker.virtualHost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ virtual host name to which to connect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.ui</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Configuration of user interface related features.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.ui.maxSessionInactivityInSeconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer (default 1800)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional value, that defines number of seconds where users inactivity cases the automatic logout operation from FURMS UI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">furmsServer.ui.secondsBeforeShowingLogoutWarning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer (default 120)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional value that, defines number of seconds before the user is shown the warning message about automatic logout from FURMS UI.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any reconfiguration of aforementioned options in the case of FURMS installation from scratch, is currently supported only by reinstallation from scratch. You have to update the settings, drop databases (if stack was already started), and install FURMS stack again.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="email-templates-configuration"><a class="anchor" href="#email-templates-configuration"></a>Email templates configuration</h3>
<div class="paragraph">
<p>FURMS utilizes Unity-IdM notification subsystem, therefore in order to setup email templates used by FURMS, administrator has to create the Unity-IdM configuration files, described in the next subsections, and put a reference to those in the Ansible group variables file.</p>
</div>
<div class="sect3">
<h4 id="message-templates-configuration"><a class="anchor" href="#message-templates-configuration"></a>Message templates configuration</h4>
<div class="paragraph">
<p>This particular configuration file is parsed by Unity-IdM and defines all email template definitions. Below is the default content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>master-furms-header.subject.en=
master-furms-header.consumer=Generic
master-furms-header.type=HTML
master-furms-header.bodyFile.en=${CONF}/msgTemplates/masterTemplate-furms-head.html

master-furms-footer.subject.en=
master-furms-footer.consumer=Generic
master-furms-footer.type=HTML
master-furms-footer.bodyFile.en=${CONF}/msgTemplates/masterTemplate-furms-footer.html

policyAcceptanceNew.subject.en=Fenix policy document awaits acceptance
policyAcceptanceNew.consumer=UserNotification
policyAcceptanceNew.notificationChannel=default_email
policyAcceptanceNew.type=HTML
policyAcceptanceNew.bodyFile.en=${CONF}/msgTemplates/policyAcceptanceNew.html

policyAcceptanceRevision.subject.en=Fenix policy document was updated
policyAcceptanceRevision.consumer=UserNotification
policyAcceptanceRevision.notificationChannel=default_email
policyAcceptanceRevision.type=HTML
policyAcceptanceRevision.bodyFile.en=${CONF}/msgTemplates/policyAcceptanceRevision.html

invitationNew.subject.en=New role to accept
invitationNew.consumer=UserNotification
invitationNew.notificationChannel=default_email
invitationNew.type=HTML
invitationNew.bodyFile.en=${CONF}/msgTemplates/invitationNew.html

registrationInvitation.subject.en=You have been invited to the FURMS app
registrationInvitation.consumer=InvitationWithCode
registrationInvitation.notificationChannel=default_email
registrationInvitation.type=HTML
registrationInvitation.bodyFile.en=${CONF}/msgTemplates/registrationInvitation.html

invitationAccepted.subject.en=Invitation has been accepted
invitationAccepted.consumer=UserNotification
invitationAccepted.notificationChannel=default_email
invitationAccepted.type=HTML
invitationAccepted.bodyFile.en=${CONF}/msgTemplates/invitationAccepted.html

invitationRejected.subject.en=Invitation has been rejected
invitationRejected.consumer=UserNotification
invitationRejected.notificationChannel=default_email
invitationRejected.type=HTML
invitationRejected.bodyFile.en=${CONF}/msgTemplates/invitationRejected.html

applicationNew.subject.en=You have received new application
applicationNew.consumer=UserNotification
applicationNew.notificationChannel=default_email
applicationNew.type=HTML
applicationNew.bodyFile.en=${CONF}/msgTemplates/applicationNew.html

applicationAccepted.subject.en=Application has been accepted
applicationAccepted.consumer=UserNotification
applicationAccepted.notificationChannel=default_email
applicationAccepted.type=HTML
applicationAccepted.bodyFile.en=${CONF}/msgTemplates/applicationAccepted.html

applicationRejected.subject.en=Application has been rejected
applicationRejected.consumer=UserNotification
applicationRejected.notificationChannel=default_email
applicationRejected.type=HTML
applicationRejected.bodyFile.en=${CONF}/msgTemplates/applicationRejected.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>The path to this file shall be provided in the  <code>unity.msgTemplates.configuration</code> property value in the Ansible groups variable file. Note that there are couple of predefined message template definitions that must be preserved. The following template definitions are used by FURMS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>policyAcceptanceNew</code> - utilized to notify user about new policy document to accept,</p>
</li>
<li>
<p><code>policyAcceptanceRevision</code> - utilized to notify user that existing policy has been updated and awaits approval,</p>
</li>
<li>
<p><code>invitationNew</code> - utilized to send invitations to existing users who were invited to new roles,</p>
</li>
<li>
<p><code>registrationInvitation</code> - utilized to send invitations to create a new account in FURMS to prospective users,</p>
</li>
<li>
<p><code>invitationAccepted</code> - utilized to send information that particular user has accepted the invitation to new role, email is send to administrators of originating group as well as to the person who initiated the invitation,</p>
</li>
<li>
<p><code>invitationRejected</code> - utilized to send information that a user has rejected the invitation to new role, email is send to administrators of originating group as well as to the person who initiated the invitation,</p>
</li>
<li>
<p><code>applicationNew</code> - utilized to send information to particular project&#8217;s administrators that a new user has applied for project membership,</p>
</li>
<li>
<p><code>applicationAccepted</code> - utilized to send information to a user, that her/his application to become member of a project, has been accepted by project administrator,</p>
</li>
<li>
<p><code>applicationRejected</code> - utilized to send information to a user, that her/his application to become member of a project, has been rejected by project administrator.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most of the configuration in the default message template file should not be changed.
It is recommended for system administrator to adjust the template subject only.</p>
</div>
</div>
<div class="sect3">
<h4 id="email-template-body-files"><a class="anchor" href="#email-template-body-files"></a>Email template body files</h4>
<div class="paragraph">
<p>Given the default template configuration file, FURMS system administrator has to create the following email template body files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>policyAcceptanceNew.html</code> - used by <code>policyAcceptanceNew</code> template definition,</p>
</li>
<li>
<p><code>policyAcceptanceRevision.html</code> - used by <code>policyAcceptanceRevision</code> template definition,</p>
</li>
<li>
<p><code>invitationNew.html</code> - used by <code>invitationNew</code> template definition,</p>
</li>
<li>
<p><code>registrationInvitation.html</code> - used by <code>registrationInvitation</code> template definition,</p>
</li>
<li>
<p><code>invitationAccepted.html</code> - used by <code>invitationAccepted</code> template definition,</p>
</li>
<li>
<p><code>invitationRejected.html</code> - used by <code>invitationRejected</code> template definition,</p>
</li>
<li>
<p><code>applicationNew.html</code> - used by <code>applicationNew</code> template definition,</p>
</li>
<li>
<p><code>applicationAccepted.html</code> - used by <code>applicationAccepted</code> template definition,</p>
</li>
<li>
<p><code>applicationRejected.html</code> - used by <code>applicationRejected</code> template definition,</p>
</li>
<li>
<p><code>masterTemplate-furms-head.html</code> - header that can be utilized in body files of other HTML templates. In the resolved HTML email the <code>${include:master-furms-head}</code> tag is replaced with the header content,</p>
</li>
<li>
<p><code>masterTemplate-furms-footer.html</code>- footer that can be utilized in body files of other HTML templates. In the resolved HTML email the <code>${include:master-furms-footer}</code> tag is replaced with the footer content.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The path to the directory that stores the aforementioned HTML template files, shall be provided in the <code>unity.msgTemplates.files</code> property value in the Ansible groups variable file.</p>
</div>
<div class="paragraph">
<p>Example of <code>policyAcceptanceNew.html</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>${include:master-furms-header}
&lt;p&gt;Dear User,&lt;/p&gt;
&lt;p&gt;There is a new policy document awaiting your acceptance.&lt;/p&gt;
&lt;p&gt;Please read the '${custom.name}' document available &lt;a href=&quot;${custom.furmsUrl}&quot;&gt;here&lt;/a&gt;.
&lt;/p&gt;
${include:master-furms-footer}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Email templates can use custom variables that define dynamic contents set by FURMS when sending notifications. The following table provides information about variables available in the particular HTML template.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTML template file name</th>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description of resolved variable in template</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>policyAcceptanceNew.html<br>
policyAcceptanceRevision.html</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy document name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.furmsUrl}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to FURMS that points to the User Settings &#8594; Policy Documents view</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">invitationNew.html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.role}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FURMS role that invitee is requested to accept</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.furmsUrl}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to FURMS that points to the User Settings &#8594; Invitations view</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">registrationInvitation.html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.role}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FURMS role that invitee is requested to accept</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${url}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to Unity-IdM that points to the registration form</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><div class="content"><div class="paragraph">
<p>invitationAccepted.html<br>
invitationRejected.html</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.role}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FURMS role that invitee has accept/rejected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.email}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of person that either accepted or declined the invitation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">applicationNew.html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.projectName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project name for which user has requested membership</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.email}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address of person that requested membership to a project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.furmsUrl}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to FURMS that points to particular project&#8217;s Users view</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>applicationAccepted.html<br>
applicationRejected.html</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${custom.projectName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project name for which user has requested membership</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="install-furms-stack"><a class="anchor" href="#install-furms-stack"></a>Install FURMS stack</h3>
<div class="paragraph">
<p>Once configuration is finished, the following command will install the Unity-IdM as well as FURMS service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cd $FURMS_ROOT_DIR
&gt; ansible-playbook -i inventory furms-devops-tooling/install-stack.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>After installation the services are available in directory pointed out in <code>installDir</code>  property defined in <code>$FURMS_ROOT_DIR/group_vars/all.yml</code> file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="furms-system-minor-update-procedure"><a class="anchor" href="#furms-system-minor-update-procedure"></a>FURMS system minor update procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Minor FURMS updates are performed whenever a newly installed software version differs only with the last number when compared to the currently installed one. Database backup is advised, however in the minor update case the risk is minimal - revision releases typically do not introduce database content migrations. The following steps provide example how to update the FURMS service into <code>1.0.1</code> version, assuming <code>1.0.0</code> is installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#stopping-furms-stack">Stop FURMS stack</a>.</p>
</li>
<li>
<p>Install minor update:</p>
<div class="ulist">
<ul>
<li>
<p>enter the <code>$FURMS_ROOT_DIR</code> directory,</p>
</li>
<li>
<p>update the <code>furmsVersion</code> property defined in <code>group_vars/all.yml</code> file, change its value to <code>1.0.1</code></p>
</li>
<li>
<p>execute: <code>ansible-playbook -i inventory furms-devops-tooling/install-minor-update.yml</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#starting-furms-stack">Start FURMS stack</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrade-from-1-0-to-2-0-release"><a class="anchor" href="#upgrade-from-1-0-to-2-0-release"></a>Upgrade from 1.0 to 2.0 release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the FURMS 2.0 release installation steps basing on 1.0 release configuration. Note that it is required to drop the databases for FURMS service as well as for Unity-IdM, however all of the Ansible related configuration shall be reused.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install and configure RabbitMQ broker according to <a href="#broker">guidelines from this section</a>.</p>
</li>
<li>
<p>Drop PostgreSQL database used by Unity-IdM instance.</p>
</li>
<li>
<p>Drop PostgreSQL database used by FURMS service instance.</p>
</li>
<li>
<p>Update the FURMS Ansible scripts to the latest version, execute <code>./install_furms_devops_tooling.py</code> in the directory where tooling was installed.</p>
</li>
<li>
<p>Update the trustStore file: add the public CA certificate which is at the top of the certificates chain used to sign Broker credential.</p>
</li>
<li>
<p>Update your existing <code>groups_var/all.yml</code> Ansible configuration file:</p>
<div class="ulist">
<ul>
<li>
<p>change the version of furmsVersion to <code>2.0.0</code></p>
</li>
<li>
<p>add the following configuration under the furmsServer:</p>
<div class="literalblock">
<div class="content">
<pre>furmsServer:
	...
    broker:
        host:                -- set -- me --
        port:                -- set -- me --
        username:            -- set -- me --
        password:            -- set -- me --
        virtualHost:         -- set -- me --
    ui:
        maxSessionInactivityInSeconds:     -- set -- me -- #optional: default 1800
        secondsBeforeShowingLogoutWarning: -- set -- me -- #optional: default 120</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#install-furms-stack">Install FURMS stack</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrade-from-2-0-to-3-0-release"><a class="anchor" href="#upgrade-from-2-0-to-3-0-release"></a>Upgrade from 2.0 to 3.0 release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the FURMS 3.0 release installation steps basing on 2.0 release configuration. This procedure does not require dropping any of the databases, and all of the Ansible related configuration is reused.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make a backup of PostgreSQL database used by Unity-IdM instance.</p>
</li>
<li>
<p>Make a backup of PostgreSQL database used by FURMS service instance.</p>
</li>
<li>
<p>Update the FURMS Ansible scripts to the latest version, execute <code>./install_furms_devops_tooling.py</code> in the directory where tooling was installed.</p>
</li>
<li>
<p><a href="#stopping-furms-stack">Stop FURMS stack</a>.</p>
</li>
<li>
<p>Update your existing <code>groups_var/all.yml</code> Ansible configuration file:</p>
<div class="ulist">
<ul>
<li>
<p>change the version of furmsVersion to <code>3.0.0</code></p>
</li>
<li>
<p>add the following configuration under the unity:</p>
<div class="literalblock">
<div class="content">
<pre>unity:
	...
  mail:
    from:                -- set -- me --
    smtp:
      host:              -- set -- me --
      port:              -- set -- me --
      username:          -- set -- me --
      password:          -- set -- me --
  msgTemplates:          # this section is optional, if not provided the default configuration is delivered
    files:               -- set -- me --
    configuration:       -- set -- me --</pre>
</div>
</div>
</li>
<li>
<p>To customize the default message templates used by FURMS to send email notifications, please refer to the <a href="#email-templates-configuration">Email templates configuration</a> section.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#install-furms-stack">Install FURMS stack</a>.</p>
</li>
<li>
<p>Make sure that RabbitMQ broker is up and running.</p>
</li>
<li>
<p><a href="#starting-furms-stack">Start FURMS stack</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrade-from-3-0-to-3-1-release"><a class="anchor" href="#upgrade-from-3-0-to-3-1-release"></a>Upgrade from 3.0 to 3.1 release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the FURMS 3.1 release installation steps basing on 3.0 release configuration. This release does not introduce any new Ansible configuration, so the installation straight forward.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make a backup of PostgreSQL database used by Unity-IdM instance.</p>
</li>
<li>
<p>Make a backup of PostgreSQL database used by FURMS service instance.</p>
</li>
<li>
<p>Update the FURMS Ansible scripts to the latest version, execute <code>./install_furms_devops_tooling.py</code> in the directory where tooling was installed.</p>
</li>
<li>
<p><a href="#stopping-furms-stack">Stop FURMS stack</a>.</p>
</li>
<li>
<p>Update your existing <code>groups_var/all.yml</code> Ansible configuration file and change the version of furmsVersion to <code>3.1.0</code></p>
</li>
<li>
<p><a href="#install-furms-stack">Install FURMS stack</a>.</p>
</li>
<li>
<p>Make sure that RabbitMQ broker is up and running.</p>
</li>
<li>
<p><a href="#starting-furms-stack">Start FURMS stack</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="operating-the-system"><a class="anchor" href="#operating-the-system"></a>Operating the system</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="starting-furms-stack"><a class="anchor" href="#starting-furms-stack"></a>Starting FURMS stack</h3>
<div class="paragraph">
<p>Once FURMS stack has been installed, the following command starts the FURMS stack - Unity-IdM server as well as FURMS service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cd $FURMS_ROOT_DIR
&gt; ansible-playbook -i inventory furms-devops-tooling/start-stack.yml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="stopping-furms-stack"><a class="anchor" href="#stopping-furms-stack"></a>Stopping FURMS stack</h3>
<div class="paragraph">
<p>At any time the FURMS stack can be stopped using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; cd $FURMS_ROOT_DIR
&gt; ansible-playbook -i inventory furms-devops-tooling/stop-stack.yml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="runtime-directories-structure-log-files"><a class="anchor" href="#runtime-directories-structure-log-files"></a>Runtime directories structure, log files</h3>
<div class="paragraph">
<p>The following listing shows example directory structure after FURMS installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>./20210211-214739
./20210211-214739/furms-server -&gt; furms-server-1.0.0
./20210211-214739/furms-server-1.0.0
./20210211-214739/furms-server-1.0.0/furms-server
./20210211-214739/unity -&gt; unity-server-3.4.3
./20210211-214739/unity-server-3.4.3
./20210211-214739/unity-server-3.4.3/conf
./20210211-214739/unity-server-3.4.3/bin
./20210211-214739/unity-server-3.4.3/webContents
./20210211-214739/unity-server-3.4.3/data
./20210211-214739/unity-server-3.4.3/workspace
./20210211-214739/unity-server-3.4.3/extra
./20210211-214739/unity-server-3.4.3/lib
./20210211-214739/unity-server-3.4.3/conf-orig
./current -&gt; 20210211-214739
./logs
./workspace</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>workspace/</code> directory can be ignored, it contains temporary installation data. The <code>current</code> symlink points to the currently active revision. It is especially relevant when there are more than one installation. There is also <code>logs</code> directory that contains log files from both, FURMS service as well as Unity-IdM.</p>
</div>
<div class="paragraph">
<p>Inside the <code>current/</code> directory there are both services installed. The runtime data like PIDs and other can be found there.</p>
</div>
<div class="paragraph">
<p>Note that it is not advised to perform reconfigurations in the installation directories. Such changes will be lost during subsequent update with use of Ansible.</p>
</div>
</div>
<div class="sect2">
<h3 id="authentication-to-unity-console"><a class="anchor" href="#authentication-to-unity-console"></a>Authentication to Unity console</h3>
<div class="paragraph">
<p>Access to Unity administration console should not be in general required for running FURMS, it may be however convenient to diagnose problems or to perform advanced configuration actions.</p>
</div>
<div class="paragraph">
<p>Unity console is available at the configured address of Unity server:
<code><a href="https://{{unity.advertisedHost}}/console" class="bare">https://{{unity.advertisedHost}}/console</a></code>.</p>
</div>
<div class="paragraph">
<p>Login credentials are set to the ones from Ansible configuration: <code>{{unity.initialAdminUsername}}</code> and <code>{{unity.initialAdminPassword}}</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-11-25 13:51:36 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>